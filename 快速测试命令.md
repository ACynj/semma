# å¿«é€Ÿæµ‹è¯•å‘½ä»¤

## ğŸš€ æœ€ç®€å•çš„æ–¹å¼ï¼ˆ3æ­¥ï¼‰

### æ­¥éª¤1: ä¿®æ”¹flags.yaml
```bash
# ç¼–è¾‘flags.yamlï¼Œå°†ç¬¬ä¸€è¡Œæ”¹ä¸ºï¼š
run: EnhancedUltra
```

### æ­¥éª¤2: æ¿€æ´»ç¯å¢ƒå¹¶è¿è¡Œæµ‹è¯•
```bash
conda activate semma

# ä½¿ç”¨ç°æœ‰checkpointæµ‹è¯•ï¼ˆæ¨èï¼‰
python script/run.py \
    -c config/transductive/inference.yaml \
    --dataset FB15k237 \
    --epochs 0 \
    --bpe null \
    --ckpt ckpts/semma.pth \
    --gpus [0]
```

### æ­¥éª¤3: æŸ¥çœ‹ç»“æœ
åœ¨è¾“å‡ºä¸­æŸ¥æ‰¾ä»¥ä¸‹æŒ‡æ ‡ï¼š
- `mrr: 0.xxx` - è¿™æ˜¯æœ€é‡è¦çš„æŒ‡æ ‡
- `hits@1: 0.xxx`
- `hits@10: 0.xxx`

## ğŸ“Š å¯¹æ¯”æµ‹è¯•ï¼ˆæ¨èï¼‰

ä½¿ç”¨æä¾›çš„æµ‹è¯•è„šæœ¬è‡ªåŠ¨å¯¹æ¯”ï¼š

```bash
conda activate semma

# è‡ªåŠ¨å¯¹æ¯”åŸºçº¿å’Œå¢å¼ºç‰ˆæœ¬
bash test_similarity_enhancement.sh FB15k237 ckpts/semma.pth [0]
```

## ğŸ” æ‰‹åŠ¨å¯¹æ¯”æµ‹è¯•

### 1. æµ‹è¯•åŸºçº¿ï¼ˆSEMMAï¼‰
```bash
# ç¡®ä¿flags.yamlä¸­: run: semma
conda activate semma
python script/run.py \
    -c config/transductive/inference.yaml \
    --dataset FB15k237 \
    --epochs 0 --bpe null \
    --ckpt ckpts/semma.pth \
    --gpus [0] \
    > baseline.log 2>&1
```

### 2. æµ‹è¯•å¢å¼ºç‰ˆï¼ˆEnhancedUltraï¼‰
```bash
# ä¿®æ”¹flags.yaml: run: EnhancedUltra
conda activate semma
python script/run.py \
    -c config/transductive/inference.yaml \
    --dataset FB15k237 \
    --epochs 0 --bpe null \
    --ckpt ckpts/semma.pth \
    --gpus [0] \
    > enhanced.log 2>&1
```

### 3. å¯¹æ¯”ç»“æœ
```bash
echo "=== åŸºçº¿ ==="
grep "mrr:" baseline.log
grep "hits@1:" baseline.log
grep "hits@10:" baseline.log

echo "=== å¢å¼º ==="
grep "mrr:" enhanced.log
grep "hits@1:" enhanced.log
grep "hits@10:" enhanced.log
```

## ğŸ“ å¸¸ç”¨å‘½ä»¤æ¨¡æ¿

### æµ‹è¯•ä¸åŒæ•°æ®é›†
```bash
# FB15k237
python script/run.py -c config/transductive/inference.yaml \
    --dataset FB15k237 --epochs 0 --bpe null \
    --ckpt ckpts/semma.pth --gpus [0]

# WN18RR
python script/run.py -c config/transductive/inference.yaml \
    --dataset WN18RR --epochs 0 --bpe null \
    --ckpt ckpts/semma.pth --gpus [0]
```

### ä¿®æ”¹flags.yamlçš„å¿«æ·æ–¹å¼
```bash
# åˆ‡æ¢åˆ°EnhancedUltra
sed -i 's/run: semma/run: EnhancedUltra/' flags.yaml

# åˆ‡æ¢å›semma
sed -i 's/run: EnhancedUltra/run: semma/' flags.yaml

# æŸ¥çœ‹å½“å‰è®¾ç½®
grep "^run:" flags.yaml
```

## âš¡ ä¸€é”®æµ‹è¯•è„šæœ¬

```bash
#!/bin/bash
# ä¸€é”®å¿«é€Ÿæµ‹è¯•

# å¤‡ä»½å¹¶åˆ‡æ¢åˆ°EnhancedUltra
cp flags.yaml flags.yaml.bak
sed -i 's/run:.*/run: EnhancedUltra/' flags.yaml

# è¿è¡Œæµ‹è¯•
conda activate semma
python script/run.py \
    -c config/transductive/inference.yaml \
    --dataset FB15k237 \
    --epochs 0 --bpe null \
    --ckpt ckpts/semma.pth \
    --gpus [0]

# æ¢å¤
mv flags.yaml.bak flags.yaml
```

## ğŸ’¡ æç¤º

1. **ä½¿ç”¨ç°æœ‰checkpoint**: ä¸éœ€è¦é‡æ–°è®­ç»ƒï¼Œå¯ä»¥ç›´æ¥æµ‹è¯•
2. **æ³¨æ„flags.yaml**: ç¡®ä¿è®¾ç½®æ­£ç¡®ï¼ˆ`run: EnhancedUltra`ï¼‰
3. **æŸ¥çœ‹å®Œæ•´æ—¥å¿—**: å¦‚æœè¾“å‡ºè¢«é‡å®šå‘ï¼Œæ£€æŸ¥æ—¥å¿—æ–‡ä»¶
4. **GPUå†…å­˜**: å¦‚æœå†…å­˜ä¸è¶³ï¼Œå¯ä»¥å‡å°batch_size


